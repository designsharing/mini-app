function t(t,n,e,o){return new(e||(e=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function u(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(a,u)}c((o=o.apply(t,n||[])).next())})}function n(t,n){var e,o,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(e=1,o&&(r=2&u[0]?o.return:u[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,u[1])).done)return r;switch(o=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){i.label=u[1];break}if(6===u[0]&&i.label<r[1]){i.label=r[1],r=u;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(u);break}r[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(t,i)}catch(t){u=[6,t],o=0}finally{e=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function e(t,n){console.log("[INFO]: ".concat(t),n)}function o(t,n){console.log("[SUCCESS]: ".concat(t),n)}function r(t,n){console.error("[ERROR]: ".concat(t),n)}"function"==typeof SuppressedError&&SuppressedError;var i=function(){function t(t,n){this.channel=t,this.callbacker=n}return t.prototype.post=function(t){var n,i,a;e("Bridge post event",t),window[this.channel]?(o("Bridge registered channel",this.channel),window[this.channel].postMessage(JSON.stringify(t))):(null===(n=null===window||void 0===window?void 0:window.webkit)||void 0===n?void 0:n.messageHandlers[this.channel])?(o("Bridge registered channel",this.channel),null===(a=null===(i=null===window||void 0===window?void 0:window.webkit)||void 0===i?void 0:i.messageHandlers[this.channel])||void 0===a||a.postMessage(JSON.stringify(t))):r("Bridge channel ".concat(this.channel," not found"))},t.prototype.listen=function(){this.callbacker.listen()},t}(),a=function(){function t(t,n){this.name=t,this.handler=n}return t.prototype.listen=function(){window[this.name]=this.handler},t}(),u=function(t){this.data=t,this.next=void 0},c=new(function(){function t(){this.head=void 0,this.tail=void 0,this.length=0}return t.prototype.push=function(t){var n=new u(t);this.head?(this.tail.next=n,this.tail=this.tail.next):this.head=this.tail=n,this.length++},t.prototype.pop=function(){var t;if(!this.isEmpty()&&void 0!==this.head){var n=this.head;return null==(null===(t=this.head)||void 0===t?void 0:t.next)?this.head=this.tail=void 0:this.head=this.head.next,this.length--,n}},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.size=function(){return this.length},t.prototype.front=function(){if(!this.isEmpty()&&void 0!==this.head)return this.head},t}()),s=new(function(){function t(){this.map=new Map}return t.prototype.add=function(t){this.map.set(t.name,t)},t.prototype.get=function(t){return this.map.get(t)},t.prototype.match=function(t){var n=this.map.get(t);return n&&this.map.delete(t),n},t.prototype.size=function(){return this.map.size},t.prototype.keys=function(){return Array.from(this.map.keys())},t.prototype.values=function(){return Array.from(this.map.values())},t.prototype.has=function(t){return this.map.has(t)},t.prototype.clear=function(){this.map.clear()},t}()),f="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,d=(f||l||Function("return this")()).Symbol,h=Object.prototype,p=h.hasOwnProperty,v=h.toString,y=d?d.toStringTag:void 0;var g=Object.prototype.toString;var m=d?d.toStringTag:void 0;function b(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?function(t){var n=p.call(t,y),e=t[y];try{t[y]=void 0;var o=!0}catch(t){}var r=v.call(t);return o&&(n?t[y]=e:delete t[y]),r}(t):function(t){return g.call(t)}(t)}function w(t){return null!=t&&"object"==typeof t}var S=Array.isArray,x=d?d.prototype:void 0,O=x?x.toString:void 0;function A(t){if("string"==typeof t)return t;if(S(t))return function(t,n){for(var e=-1,o=null==t?0:t.length,r=Array(o);++e<o;)r[e]=n(t[e],e,t);return r}(t,A)+"";if(function(t){return"symbol"==typeof t||w(t)&&"[object Symbol]"==b(t)}(t))return O?O.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function N(t){return null==t?"":A(t)}var j,L,I=(j=Object.getPrototypeOf,L=Object,function(t){return j(L(t))}),R=Function.prototype,E=Object.prototype,B=R.toString,C=E.hasOwnProperty,P=B.call(Object);var k,D=(k={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},function(t){return null==k?void 0:k[t]}),z=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,U=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var T=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var J=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Z="\\ud800-\\udfff",G="\\u2700-\\u27bf",q="a-z\\xdf-\\xf6\\xf8-\\xff",F="A-Z\\xc0-\\xd6\\xd8-\\xde",M="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_="["+M+"]",H="\\d+",V="["+G+"]",Y="["+q+"]",$="[^"+Z+M+H+G+q+F+"]",K="(?:\\ud83c[\\udde6-\\uddff]){2}",W="[\\ud800-\\udbff][\\udc00-\\udfff]",Q="["+F+"]",X="(?:"+Y+"|"+$+")",tt="(?:"+Q+"|"+$+")",nt="(?:['’](?:d|ll|m|re|s|t|ve))?",et="(?:['’](?:D|LL|M|RE|S|T|VE))?",ot="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",rt="[\\ufe0e\\ufe0f]?",it=rt+ot+("(?:\\u200d(?:"+["[^"+Z+"]",K,W].join("|")+")"+rt+ot+")*"),at="(?:"+[V,K,W].join("|")+")"+it,ut=RegExp([Q+"?"+Y+"+"+nt+"(?="+[_,Q,"$"].join("|")+")",tt+"+"+et+"(?="+[_,Q+X,"$"].join("|")+")",Q+"?"+X+"+"+nt,Q+"+"+et,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",H,at].join("|"),"g");function ct(t,n,e){return t=N(t),void 0===n?function(t){return J.test(t)}(t)?function(t){return t.match(ut)||[]}(t):function(t){return t.match(T)||[]}(t):t.match(n)||[]}var st=RegExp("['’]","g");var ft,lt=(ft=function(t,n,e){return t+(e?"_":"")+n.toLowerCase()},function(t){return function(t,n,e){for(var o=-1,r=null==t?0:t.length;++o<r;)e=n(e,t[o],o,t);return e}(ct(function(t){return(t=N(t))&&t.replace(z,D).replace(U,"")}(t).replace(st,"")),ft,"")});function dt(t,n){if(function(t){if(!w(t)||"[object Object]"!=b(t))return!1;var n=I(t);if(null===n)return!0;var e=C.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&B.call(e)==P}(t)){for(var e=t,o={},r=0,i=Object.entries(e);r<i.length;r++){var a=i[r],u=a[0],c=a[1];o[n(u)]=dt(c,n)}return o}return S(t)?t.map(function(t){return dt(t,n)}):t}var ht=function(t){return Array.isArray(t)?t.map(ht):t&&"object"==typeof t?Object.fromEntries(Object.entries(t).filter(function(t){return t[0],void 0!==t[1]}).map(function(t){var n=t[0],e=t[1];return[n,ht(e)]})):t},pt=function(t){var n={methodName:"onDeviceInfo",methodParam:t||null};vt.post(n)},vt=new i("OpenSdk",new a("onFlutterMessage",function(t){e("Bridge received message",t);var n=t;try{n=JSON.parse(t)}catch(t){r("Bridge JSON parse error",t)}var o=n.methodName,i=n.methodParam,a=n.code;if(s.add({name:o,data:i,code:a}),"onAppStatus"!=o&&c.push({name:o,data:i,code:a}),"onReadLocalStorage"==o){var u=i.value;u&&"object"==typeof u&&u._isStringify&&(delete u._isStringify,i.value=JSON.stringify(u))}}));vt.listen();var yt=function(o,r){return t(void 0,void 0,void 0,function(){var t,i,a,u;return n(this,function(n){switch(n.label){case 0:return[4,(f=200,new Promise(function(t){setTimeout(t,f)}))];case 1:return n.sent(),t=s.match(o),e("--execute-targetData--".concat(o),JSON.stringify(t)),t?[2,t]:(i=c.front(),e("--execute-frontNode--".concat(o),JSON.stringify(i)),i&&i.data.name==o?(a=i.data.data,u=i.data.code,c.pop(),[2,{data:a,code:u}]):[2,--r])}var f})})},gt=function(e,o){return void 0===o&&(o=66),t(void 0,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return[4,yt(e,o)];case 1:return"object"!=typeof(t=n.sent())?[3,2]:[2,t];case 2:return t<=0?[2,null]:[4,gt(e,t)];case 3:return[2,n.sent()]}})})},mt=new(function(){function e(){}return e.prototype.getAppConfig=function(e,i){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return vt.post({methodName:"onInitAppConfig"}),[4,gt("onInitAppConfig")];case 1:return null!==(t=n.sent())?(o("Bridge onInitAppConfig data successful",t),null==e||e(t)):(r("Bridge onInitAppConfig data fail",t),null==i||i()),[2]}})})},e.prototype.getDeviceInfo=function(e,i){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return pt(),[4,gt("onDeviceInfo")];case 1:return null!==(t=n.sent())?(o("Bridge onDeviceInfo data successful",t),null==e||e(t)):(r("Bridge onDeviceInfo data fail",t),null==i||i()),[2]}})})},e.prototype.closeLoading=function(){vt.post({methodName:"onInitLoading"})},e.prototype.login=function(e,i){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return vt.post({methodName:"onLogin"}),[4,gt("onLogin")];case 1:return null!==(t=n.sent())?(o("Bridge onLogin data successful",t),null==e||e(t)):(r("Bridge onLogin data fail",t),null==i||i()),[2]}})})},e.prototype.request=function(e,i,a){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return function(t){var n={methodName:"onRequest",methodParam:t};vt.post(n)}(e),[4,gt("onRequest")];case 1:return null!==(t=n.sent())?(o("Bridge onRequest data successful",t),null==i||i(t)):(r("Bridge onRequest data fail",t),null==a||a()),[2]}})})},e.prototype.getLocation=function(e,i){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return vt.post({methodName:"onGetLocation"}),[4,gt("onGetLocation")];case 1:return null!==(t=n.sent())?(o("Bridge onGetLocation data successful",t),null==e||e(t)):(r("Bridge onGetLocation data fail",t),null==i||i()),[2]}})})},e.prototype.openCashier=function(e,o,r){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return function(t){var n,e={methodName:"onCashierSheet",methodParam:(n=t,dt(n,function(t){return lt(t)}))};vt.post(e)}(e),[4,gt("onCashierSheet")];case 1:return t=n.sent(),null==o||o(t),[2]}})})},e.prototype.sharedLink=function(e){return t(this,void 0,void 0,function(){return n(this,function(t){return function(t){var n={methodName:"onSharedLink",methodParam:ht(t)};vt.post(n)}(e),[2]})})},e.prototype.getAppStatus=function(e,i){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return vt.post({methodName:"onAppStatus"}),[4,gt("onAppStatus")];case 1:return null!==(t=n.sent())?(o("Bridge onAppStatus data successful",t),null==e||e(t)):(r("Bridge onAppStatus data fail",t),null==i||i()),[2]}})})},e.prototype.miniappBar=function(e){return t(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return n={methodName:"onDisplayOptionView",methodParam:{display:e}},vt.post(n),[4,gt("onDisplayOptionView")];case 1:return t.sent(),[2]}var n})})},e.prototype.rotateScreen=function(e){return t(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return pt({orientation:e}),[4,gt("onDeviceInfo")];case 1:return t.sent(),[2]}})})},e.prototype.openAlbum=function(e){return t(this,void 0,void 0,function(){return n(this,function(t){return function(t){var n={methodName:"onMediaPlayer",methodParam:t};vt.post(n)}(e),[2]})})},e.prototype.onReady=function(e){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return vt.post({methodName:"onReady"}),[4,gt("onReady")];case 1:return t=n.sent(),null==e||e(t),[2]}})})},e.prototype.storeOnNative=function(e,o){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return function(t){var n={methodName:"onSaveLocalStorage",methodParam:t};if(t&&t.value&&"string"==typeof t.value)try{var e=JSON.parse(t.value);e._isStringify=1,t.value=e}catch(t){console.error("fetchStoredFromNative validate json",t)}vt.post(n)}(e),[4,gt("onSaveLocalStorage")];case 1:return t=n.sent(),null==o||o(t),[2]}})})},e.prototype.fetchStoredFromNative=function(e,o){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return function(t){var n={methodName:"onReadLocalStorage",methodParam:t};vt.post(n)}(e),[4,gt("onReadLocalStorage")];case 1:return t=n.sent(),null==o||o(t),[2]}})})},e.prototype.getRequestAssets=function(e){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return vt.post({methodName:"onRequestAssets"}),[4,gt("onRequestAssets")];case 1:return t=n.sent(),null==e||e(t),[2]}})})},e.prototype.onSendBotInfo=function(e,o){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return function(t){var n={methodName:"onCreateChatBotChat",methodParam:t};vt.post(n)}(e),[4,gt("onCreateChatBotChat")];case 1:return t=n.sent(),null==o||o(t),[2]}})})},e}());window.chat=mt;
